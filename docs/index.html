<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Best">
<meta name="dcterms.date" content="2023-03-06">

<title>Shiny Exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="index_files/libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<script src="index_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="index_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="index_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="index_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="index_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="index_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="index_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="index_files/libs/leaflet-binding-2.1.1.9000/leaflet.js"></script>
<script src="index_files/libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="index_files/libs/typedarray-0.1/typedarray.min.js"></script>
<link href="index_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="index_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="index_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="index_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script src="index_files/libs/ionrangeslider-javascript-2.3.1/js/ion.rangeSlider.min.js"></script>
<script src="index_files/libs/strftime-0.9.2/strftime-min.js"></script>
<link href="index_files/libs/ionrangeslider-css-2.3.1/css/ion.rangeSlider.css" rel="stylesheet">
<link href="index_files/libs/leaflet-easybutton-1.3.1/easy-button.css" rel="stylesheet">
<script src="index_files/libs/leaflet-easybutton-1.3.1/easy-button.js"></script>
<script src="index_files/libs/leaflet-easybutton-1.3.1/EasyButton-binding.js"></script>
<link href="index_files/libs/leaflet-locationfilter2-0.1.1/locationfilter.css" rel="stylesheet">
<script src="index_files/libs/leaflet-locationfilter2-0.1.1/locationfilter.js"></script>
<script src="index_files/libs/leaflet-locationfilter2-0.1.1/locationfilter-bindings.js"></script>
<link href="index_files/libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet">
<link href="index_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="index_files/libs/datatables-binding-0.26/datatables.js"></script>
<link href="index_files/libs/dt-core-bootstrap-1.12.1/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="index_files/libs/dt-core-bootstrap-1.12.1/css/dataTables.bootstrap.extra.css" rel="stylesheet">
<script src="index_files/libs/dt-core-bootstrap-1.12.1/js/jquery.dataTables.min.js"></script>
<script src="index_files/libs/dt-core-bootstrap-1.12.1/js/dataTables.bootstrap.min.js"></script>
<link href="index_files/libs/dt-ext-scroller-bootstrap-1.12.1/css/scroller.bootstrap.min.css" rel="stylesheet">
<script src="index_files/libs/dt-ext-scroller-bootstrap-1.12.1/js/dataTables.scroller.min.js"></script>
<script src="index_files/libs/dt-ext-scroller-bootstrap-1.12.1/js/scroller.bootstrap.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="index_files/libs/bootstrap-grid-3.4.1/bootstrap-grid.min.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#download" id="toc-download" class="nav-link" data-scroll-target="#download">Download</a></li>
  <li><a href="#faithful" id="toc-faithful" class="nav-link" data-scroll-target="#faithful"><code>01_faithful</code></a></li>
  <li><a href="#quakes_mag" id="toc-quakes_mag" class="nav-link" data-scroll-target="#quakes_mag"><code>02_quakes_mag</code></a></li>
  <li><a href="#quakes_depth" id="toc-quakes_depth" class="nav-link" data-scroll-target="#quakes_depth"><code>03_quakes_depth</code></a></li>
  <li><a href="#quakes_map" id="toc-quakes_map" class="nav-link" data-scroll-target="#quakes_map"><code>04_quakes_map</code></a></li>
  <li><a href="#quakes_dashboard" id="toc-quakes_dashboard" class="nav-link" data-scroll-target="#quakes_dashboard"><code>05_quakes_dashboard</code></a></li>
  <li><a href="#rmarkdown-using-crosstalk" id="toc-rmarkdown-using-crosstalk" class="nav-link" data-scroll-target="#rmarkdown-using-crosstalk">Rmarkdown using Crosstalk</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Shiny Exercises</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ben Best </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2023-03-06</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>Here’s a presentation to accompany these introductory materials:</p>
<p><a href="http://bit.ly/shiny-2018-04">Creating Interactive Web Applications with R &amp; Shiny</a></p>
<p>Numbered folders in this repository correspond with iterative development and enhancement of a Shiny app:</p>
<ul>
<li><code>01_faithful</code>: default app from using RStudio, File &gt; New File &gt; Shiny Web App… <img src="screenshot-01_faithful.png" class="img-fluid"></li>
<li><code>02_quakes_mag</code>: swap to quakes dataset, adjust histogram by magnitude</li>
<li><code>03_quakes_depth</code>: add depth slider, select box for variable to histogram</li>
<li><code>04_quakes_map</code>: add leaflet map</li>
<li><code>05_quakes_dashboard</code>: enhance ui with shinydashboard <img src="screenshot-05_quakes_dashboard.png" class="img-fluid"></li>
</ul>
<p>The latest versions of <a href="https://cloud.r-project.org/">R</a> and <a href="https://www.rstudio.com/products/rstudio/download/#download">RStudio</a> are highly recommended to follow along.</p>
<p>The following sections in this Rmarkdown document demonstrate how you can develop output visualizations for use in a Shiny app, especially by defining input variables as a list (<code>input$*</code>). Knitting this Rmarkdown document <code>docs/index.Rmd</code> to <code>docs/index.html</code> in this repo and pushing to Github then allows the HTML to be viewable at https://bbest.github.io/shiny-intro (using the <a href="https://pages.github.com">Github Pages</a> feature). In contrast, note that Github and most web hosting services can <strong><em>not</em></strong> host a Shiny app. Although the <a href="http://rstudio.github.io/leaflet">leaflet</a> and <a href="https://plot.ly/ggplot2">plotly</a> visualizations in this document are interactive in the web browser, they do not require the Shiny library or a Shiny server to be displayed. Rather, the HTML output can be easily hosted on the most basic web server or passed as an email attachment. The Shiny context allows for ultimate flexibility with user interactions, but may be overkill for basic visualization. Check out all the amazing <a href="http://www.htmlwidgets.org/">htmlwidgets.org</a> and framework that works in the three contexts of: 1) RStudio, 2) Rmarkdown, and 3) Shiny.</p>
</section>
<section id="download" class="level2">
<h2 class="anchored" data-anchor-id="download">Download</h2>
<p>To run locally, first download the repository of files here:</p>
<ul>
<li>https://github.com/bbest/shiny-intro/archive/master.zip</li>
</ul>
<p>(Or use <code>git clone https://github.com/bbest/shiny-intro.git</code>.) Then unzip and launch RStudio into that working directory by double-clicking on the <code>shiny-intro.Rproj</code> file.</p>
</section>
<section id="faithful" class="level2">
<h2 class="anchored" data-anchor-id="faithful"><code>01_faithful</code></h2>
<ul>
<li><p>Code: <a href="https://github.com/bbest/shiny-intro/tree/master/01_faithful">01_faithful</a></p></li>
<li><p>Run from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runGitHub</span>(<span class="st">"bbest/shiny-intro"</span>, <span class="at">subdir=</span><span class="st">"01_faithful"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Run locally:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runApp</span>(<span class="st">"01_faithful"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
<p>In order to quickly experiment with visualization, we could pull the code from within the rendering function of the Shiny app and set the input list values that would otherwise be set from the user interface…</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>input <span class="ot">=</span> <span class="fu">list</span>(<span class="at">bins =</span> <span class="dv">30</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> faithful[, <span class="dv">2</span>] </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), <span class="at">length.out =</span> input<span class="sc">$</span>bins <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(x, <span class="at">breaks =</span> bins, <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="quakes_mag" class="level2">
<h2 class="anchored" data-anchor-id="quakes_mag"><code>02_quakes_mag</code></h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">slider_mag =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> quakes <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    mag <span class="sc">&gt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">1</span>],</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    mag <span class="sc">&lt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">2</span>])</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(d<span class="sc">$</span>mag, <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><p>Code: <a href="https://github.com/bbest/shiny-intro/tree/master/02_quakes_mag">02_quakes_mag</a></p></li>
<li><p>Run from GitHub:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runGitHub</span>(<span class="st">"bbest/shiny-intro"</span>, <span class="at">subdir=</span><span class="st">"02_quakes_mag"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Run locally:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runApp</span>(<span class="st">"02_quakes_mag"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="quakes_depth" class="level2">
<h2 class="anchored" data-anchor-id="quakes_depth"><code>03_quakes_depth</code></h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">select_var =</span> <span class="st">"depth"</span>, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">slider_mag =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>), </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">slider_depth =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> quakes <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    mag   <span class="sc">&gt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">1</span>],</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    mag   <span class="sc">&lt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">2</span>],</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    depth <span class="sc">&gt;=</span> input<span class="sc">$</span>slider_depth[<span class="dv">1</span>],</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    depth <span class="sc">&lt;=</span> input<span class="sc">$</span>slider_depth[<span class="dv">2</span>])</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(d[,input<span class="sc">$</span>select_var], <span class="at">col =</span> <span class="st">'darkgray'</span>, <span class="at">border =</span> <span class="st">'white'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><p>Code: <a href="https://github.com/bbest/shiny-intro/tree/master/03_quakes_depth">03_quakes_depth</a></p></li>
<li><p>Run from GitHub:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runGitHub</span>(<span class="st">"bbest/shiny-intro"</span>, <span class="at">subdir=</span><span class="st">"03_quakes_depth"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Run locally:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runApp</span>(<span class="st">"03_quakes_depth"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><a href="https://github.com/bbest/shiny-intro/tree/master/04_quakes_map">shiny-intro/04_quakes_map at master · bbest/shiny-intro</a></p></li>
<li><p><a href="https://github.com/bbest/shiny-intro/tree/master/05_quakes_dashboard">shiny-intro/05_quakes_dashboard at master · bbest/shiny-intro</a></p></li>
<li><p><a href="http://benbestphd.com/shiny-intro/crosstalk.html">Fiji earthquakes</a></p></li>
</ul>
</section>
<section id="quakes_map" class="level2">
<h2 class="anchored" data-anchor-id="quakes_map"><code>04_quakes_map</code></h2>
<ul>
<li><a href="http://rstudio.github.io/leaflet/markers.html#icon-markers">Leaflet for R - Markers</a></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(<span class="at">data =</span> quakes[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>,]) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">radius =</span> <span class="sc">~</span>mag, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">stroke =</span> <span class="cn">FALSE</span>, <span class="at">fillOpacity =</span> <span class="fl">0.5</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> <span class="sc">~</span><span class="fu">glue</span>(<span class="st">"&lt;b&gt;mag&lt;/b&gt;: {mag}&lt;br&gt;depth: {depth} m"</span>), <span class="at">label =</span> <span class="sc">~</span><span class="fu">as.character</span>(mag))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b3794f9433be523e9492" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b3794f9433be523e9492">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31],[4.8,4.2,5.4,4.1,4,4,4.8,4.4,4.7,4.3,4.4,4.6,4.4,4.4,6.1,4.3,6,4.5,4.4,4.4],null,null,{"interactive":true,"className":"","stroke":false,"color":"red","weight":5,"opacity":0.5,"fill":true,"fillColor":"red","fillOpacity":0.5},null,null,["<b>mag<\/b>: 4.8<br>depth: 562 m","<b>mag<\/b>: 4.2<br>depth: 650 m","<b>mag<\/b>: 5.4<br>depth: 42 m","<b>mag<\/b>: 4.1<br>depth: 626 m","<b>mag<\/b>: 4<br>depth: 649 m","<b>mag<\/b>: 4<br>depth: 195 m","<b>mag<\/b>: 4.8<br>depth: 82 m","<b>mag<\/b>: 4.4<br>depth: 194 m","<b>mag<\/b>: 4.7<br>depth: 211 m","<b>mag<\/b>: 4.3<br>depth: 622 m","<b>mag<\/b>: 4.4<br>depth: 583 m","<b>mag<\/b>: 4.6<br>depth: 249 m","<b>mag<\/b>: 4.4<br>depth: 554 m","<b>mag<\/b>: 4.4<br>depth: 600 m","<b>mag<\/b>: 6.1<br>depth: 139 m","<b>mag<\/b>: 4.3<br>depth: 306 m","<b>mag<\/b>: 6<br>depth: 50 m","<b>mag<\/b>: 4.5<br>depth: 590 m","<b>mag<\/b>: 4.4<br>depth: 570 m","<b>mag<\/b>: 4.4<br>depth: 598 m"],null,["4.8","4.2","5.4","4.1","4","4","4.8","4.4","4.7","4.3","4.4","4.6","4.4","4.4","6.1","4.3","6","4.5","4.4","4.4"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-28.74,-11.7],"lng":[165.96,184.95]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li><p>Code: <a href="https://github.com/bbest/shiny-intro/tree/master/04_quakes_map">04_quakes_map</a></p></li>
<li><p>Run from GitHub:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runGitHub</span>(<span class="st">"bbest/shiny-intro"</span>, <span class="at">subdir=</span><span class="st">"04_quakes_map"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Run locally:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runApp</span>(<span class="st">"04_quakes_map"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="quakes_dashboard" class="level2">
<h2 class="anchored" data-anchor-id="quakes_dashboard"><code>05_quakes_dashboard</code></h2>
<p>Use: - http://rstudio.github.io/shinydashboard - https://github.com/tidyverse/ggplot2 - https://plot.ly/ggplot2</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>input <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">select_var   =</span> <span class="st">"depth"</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">slider_mag   =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>), </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">slider_depth =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>get_df <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> quakes <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>      mag   <span class="sc">&gt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">1</span>],</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>      mag   <span class="sc">&lt;=</span> input<span class="sc">$</span>slider_mag[<span class="dv">2</span>],</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      depth <span class="sc">&gt;=</span> input<span class="sc">$</span>slider_depth[<span class="dv">1</span>],</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>      depth <span class="sc">&lt;=</span> input<span class="sc">$</span>slider_depth[<span class="dv">2</span>])</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>var <span class="ot">&lt;-</span> df[[input<span class="sc">$</span>select_var]]</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>df        <span class="ot">&lt;-</span> <span class="fu">get_df</span>()</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>bin_width <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="fu">c</span>(<span class="dv">7</span>, <span class="fu">length</span>(<span class="fu">unique</span>(df<span class="sc">$</span>var))))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(var)) <span class="sc">+</span> </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span>bin_width)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-fd71b7ff834b6bd6dfdf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fd71b7ff834b6bd6dfdf">{"x":{"data":[{"orientation":"v","width":[7,7,7,7,7,7,7,7,7],"base":[0,0,0,0,0,0,0,0,0],"x":[42,49,56,63,70,77,84,91,98],"y":[32,31,19,28,29,17,16,12,15],"text":["count: 32<br />var: 42","count: 31<br />var: 49","count: 19<br />var: 56","count: 28<br />var: 63","count: 29<br />var: 70","count: 17<br />var: 77","count: 16<br />var: 84","count: 12<br />var: 91","count: 15<br />var: 98"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(89,89,89,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[35.35,104.65],"tickmode":"array","ticktext":["40","60","80","100"],"tickvals":[40,60,80,100],"categoryorder":"array","categoryarray":["40","60","80","100"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"var","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1.6,33.6],"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,10,20,30],"categoryorder":"array","categoryarray":["0","10","20","30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1007f2994577d":{"x":{},"type":"bar"}},"cur_data":"1007f2994577d","visdat":{"1007f2994577d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li><p>Code: <a href="https://github.com/bbest/shiny-intro/tree/master/05_quakes_dashboard">05_quakes_dashboard</a></p></li>
<li><p>Run from GitHub:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runGitHub</span>(<span class="st">"bbest/shiny-intro"</span>, <span class="at">subdir=</span><span class="st">"05_quakes_dashboard"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Run locally:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>shiny<span class="sc">::</span><span class="fu">runApp</span>(<span class="st">"05_quakes_dashboard"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>View app directly: https://bdbest.shinyapps.io/05_quakes_dashboard</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://bdbest.shinyapps.io/05_quakes_dashboard"><img src="./screenshot-05_quakes_dashboard.png" class="img-fluid figure-img"></a></p>
</figure>
</div></li>
</ul>
</section>
<section id="rmarkdown-using-crosstalk" class="level2">
<h2 class="anchored" data-anchor-id="rmarkdown-using-crosstalk">Rmarkdown using Crosstalk</h2>
<ul>
<li>https://rstudio.github.io/crosstalk</li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(crosstalk)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap data frame in SharedData</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> SharedData<span class="sc">$</span><span class="fu">new</span>(quakes[<span class="fu">sample</span>(<span class="fu">nrow</span>(quakes), <span class="dv">100</span>),])</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a filter input</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">filter_slider</span>(<span class="st">"mag"</span>, <span class="st">"Magnitude"</span>, sd, <span class="at">column=</span><span class="sc">~</span>mag, <span class="at">step=</span><span class="fl">0.1</span>, <span class="at">width=</span><span class="dv">250</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="form-group crosstalk-input crosstalk-input-slider js-range-slider" id="mag" style="width: 250px;">
<label class="control-label" for="mag">Magnitude</label>
<input data-skin="shiny" data-type="double" data-min="4" data-max="5.6" data-from="4" data-to="5.6" data-step="0.1" data-grid="true" data-grid-num="8" data-grid-snap="false" data-prettify-separator="," data-keyboard="true" data-keyboard-step="6.25" data-drag-interval="true" data-data-type="number">
<script type="application/json" data-for="mag">{
  "values": [4, 4, 4, 4, 4.1, 4.1, 4.1, 4.1, 4.1, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.2, 4.3, 4.3, 4.3, 4.3, 4.3, 4.3, 4.3, 4.3, 4.3, 4.3, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.6, 4.6, 4.6, 4.6, 4.6, 4.6, 4.6, 4.6, 4.6, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.7, 4.8, 4.8, 4.8, 4.8, 4.9, 4.9, 4.9, 4.9, 5, 5, 5, 5, 5, 5.1, 5.1, 5.1, 5.2, 5.3, 5.3, 5.4, 5.4, 5.5, 5.5, 5.5, 5.5, 5.6],
  "keys": ["750", "937", "389", "698", "595", "431", "317", "213", "793", "877", "718", "932", "210", "628", "132", "650", "256", "259", "341", "494", "871", "282", "51", "557", "140", "345", "740", "36", "591", "122", "799", "135", "10", "773", "86", "183", "668", "633", "409", "519", "464", "263", "11", "147", "461", "508", "219", "747", "998", "560", "886", "737", "509", "368", "133", "505", "428", "102", "189", "585", "108", "911", "304", "748", "949", "621", "471", "822", "729", "203", "736", "507", "104", "442", "420", "581", "988", "1", "266", "325", "617", "311", "384", "922", "166", "840", "643", "99", "424", "367", "812", "80", "787", "363", "547", "496", "70", "531", "952", "712"],
  "group": ["SharedData2923f23e"]
}</script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use SharedData like a dataframe with Crosstalk-enabled widgets</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bscols</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">leaflet</span>(sd) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addMarkers</span>(),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    sd, <span class="at">extensions=</span><span class="st">"Scroller"</span>, <span class="at">style=</span><span class="st">"bootstrap"</span>, <span class="at">class=</span><span class="st">"compact"</span>, <span class="at">width=</span><span class="st">"100%"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">options=</span><span class="fu">list</span>(<span class="at">deferRender=</span><span class="cn">TRUE</span>, <span class="at">scrollY=</span><span class="dv">300</span>, <span class="at">scroller=</span><span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="container-fluid crosstalk-bscols">
<div class="row">
<div class="col-xs-6">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7a246d44ced6fa56ebb4" style="width:100%;height:400px;"></div>
<script type="application/json" data-for="htmlwidget-7a246d44ced6fa56ebb4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addSelect","args":["SharedData2923f23e"]},{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[-19.88,-20.13,-25.6,-15.85,-18.85,-23.46,-28.98,-28.56,-20.61,-22.54,-26.17,-26.2,-23.5,-15.93,-21.98,-26.1,-13.56,-33.29,-14.32,-24.27,-19.7,-27.2,-15.46,-24.39,-20.89,-23.61,-22.06,-19.5,-12.08,-23.47,-25.28,-19.14,-20.2,-12.49,-18.14,-21.79,-19.36,-25.25,-25.82,-17.05,-20.95,-18.4,-15.9,-19.9,-19.34,-13.66,-20.48,-17.32,-23.5,-18.05,-22.9,-18.3,-20.24,-19.06,-21.3,-20.32,-21.44,-20.56,-17.8,-16.23,-23.39,-23.81,-15.4,-11.81,-14.12,-22.04,-15.77,-13.05,-34.2,-27.22,-22.7,-18.97,-16.04,-20.91,-28.25,-10.72,-33,-15.43,-22.32,-15.66,-21.09,-20.21,-22.1,-11.76,-21.05,-18.75,-17.47,-19.6,-19.52,-20.43,-11.54,-19.66,-20.21,-30.51,-20.42,-23.65,-35.94,-22.55,-18.84,-28.15],[184.3,184.2,180.3,184.83,182.2,180.09,181.11,183.59,182.6,172.91,184.2,178.41,184.9,167.91,179.6,182.5,166.49,181.3,167.33,179.88,186.2,182.39,187.81,178.98,181.25,180.23,183.95,186.9,165.76,180.21,181.17,184.36,182.3,166.36,181.71,185,186.36,179.86,179.33,181.22,181.06,183.4,167.16,178.9,186.59,166.54,181.38,181.03,180,180.86,183.8,183.2,169.49,169.01,180.82,180.88,180.69,184.41,185.17,183.59,179.97,179.36,186.87,165.98,166.64,184.91,167.01,169.58,179.43,182.28,170.3,169.44,183.54,181.57,181.71,165.99,181.6,185.19,180.54,186.8,181.38,181.9,179.71,165.96,184.68,182.35,179.59,184.53,168.98,182.37,166.18,184.31,183.83,181.3,181.62,184.46,178.52,183.34,184.16,183.4],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"ctKey":["183","998","750","668","877","505","80","633","428","496","266","102","949","712","363","718","560","621","384","189","420","345","70","886","585","409","737","519","509","932","740","471","210","325","937","595","822","628","36","132","591","431","581","122","812","99","650","317","729","464","799","368","108","263","135","256","11","922","147","203","911","259","736","507","787","617","531","311","166","341","988","840","494","871","213","389","104","698","282","461","304","793","424","508","442","51","10","773","133","367","547","86","219","747","1","557","952","748","140","643"],"ctGroup":"SharedData2923f23e"}]}],"limits":{"lat":[-35.94,-10.72],"lng":[165.76,187.81]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-6">
<div id="htmlwidget-9daa5ebc6e0a0a1e70a8" style="width:100%;height:auto;" class="datatables html-widget "></div>
<script type="application/json" data-for="htmlwidget-9daa5ebc6e0a0a1e70a8">{"x":{"crosstalkOptions":{"key":["183","998","750","668","877","505","80","633","428","496","266","102","949","712","363","718","560","621","384","189","420","345","70","886","585","409","737","519","509","932","740","471","210","325","937","595","822","628","36","132","591","431","581","122","812","99","650","317","729","464","799","368","108","263","135","256","11","922","147","203","911","259","736","507","787","617","531","311","166","341","988","840","494","871","213","389","104","698","282","461","304","793","424","508","442","51","10","773","133","367","547","86","219","747","1","557","952","748","140","643"],"group":"SharedData2923f23e"},"style":"bootstrap","filter":"none","vertical":false,"extensions":["Scroller"],"data":[["183","998","750","668","877","505","80","633","428","496","266","102","949","712","363","718","560","621","384","189","420","345","70","886","585","409","737","519","509","932","740","471","210","325","937","595","822","628","36","132","591","431","581","122","812","99","650","317","729","464","799","368","108","263","135","256","11","922","147","203","911","259","736","507","787","617","531","311","166","341","988","840","494","871","213","389","104","698","282","461","304","793","424","508","442","51","10","773","133","367","547","86","219","747","1","557","952","748","140","643"],[-19.88,-20.13,-25.6,-15.85,-18.85,-23.46,-28.98,-28.56,-20.61,-22.54,-26.17,-26.2,-23.5,-15.93,-21.98,-26.1,-13.56,-33.29,-14.32,-24.27,-19.7,-27.2,-15.46,-24.39,-20.89,-23.61,-22.06,-19.5,-12.08,-23.47,-25.28,-19.14,-20.2,-12.49,-18.14,-21.79,-19.36,-25.25,-25.82,-17.05,-20.95,-18.4,-15.9,-19.9,-19.34,-13.66,-20.48,-17.32,-23.5,-18.05,-22.9,-18.3,-20.24,-19.06,-21.3,-20.32,-21.44,-20.56,-17.8,-16.23,-23.39,-23.81,-15.4,-11.81,-14.12,-22.04,-15.77,-13.05,-34.2,-27.22,-22.7,-18.97,-16.04,-20.91,-28.25,-10.72,-33,-15.43,-22.32,-15.66,-21.09,-20.21,-22.1,-11.76,-21.05,-18.75,-17.47,-19.6,-19.52,-20.43,-11.54,-19.66,-20.21,-30.51,-20.42,-23.65,-35.94,-22.55,-18.84,-28.15],[184.3,184.2,180.3,184.83,182.2,180.09,181.11,183.59,182.6,172.91,184.2,178.41,184.9,167.91,179.6,182.5,166.49,181.3,167.33,179.88,186.2,182.39,187.81,178.98,181.25,180.23,183.95,186.9,165.76,180.21,181.17,184.36,182.3,166.36,181.71,185,186.36,179.86,179.33,181.22,181.06,183.4,167.16,178.9,186.59,166.54,181.38,181.03,180,180.86,183.8,183.2,169.49,169.01,180.82,180.88,180.69,184.41,185.17,183.59,179.97,179.36,186.87,165.98,166.64,184.91,167.01,169.58,179.43,182.28,170.3,169.44,183.54,181.57,181.71,165.99,181.6,185.19,180.54,186.8,181.38,181.9,179.71,165.96,184.68,182.35,179.59,184.53,168.98,182.37,166.18,184.31,183.83,181.3,181.62,184.46,178.52,183.34,184.16,183.4],[161,244,440,299,501,543,304,53,488,54,65,583,61,183,583,133,83,60,204,523,47,69,40,562,599,475,134,58,63,553,367,269,533,74,574,74,100,491,600,527,611,343,41,81,56,50,556,497,550,632,71,103,100,158,624,680,583,138,97,367,541,521,78,51,63,47,64,644,40,65,69,242,384,530,226,195,72,249,565,45,555,576,579,45,136,554,622,199,63,502,89,170,242,203,562,93,138,66,210,57],[4.4,4.5,4,4.4,4.2,4.6,5.3,4.4,4.6,5.5,4.9,4.6,4.7,5.6,5.4,4.2,4.5,4.7,5,4.6,4.8,4.3,5.5,4.5,4.6,4.4,4.5,4.4,4.5,4.2,4.3,4.7,4.2,4.9,4,4.1,4.7,4.2,4.3,4.2,4.3,4.1,4.8,4.3,5.2,5.1,4.2,4.1,4.7,4.4,4.3,4.5,4.6,4.4,4.3,4.2,4.4,5,4.4,4.7,4.6,4.2,4.7,4.7,5.3,4.9,5.5,4.9,5,4.2,4.8,5,4.2,4.2,4.1,4,4.7,4,4.2,4.4,4.6,4.1,5.1,4.4,4.7,4.2,4.3,4.3,4.5,5.1,5.4,4.3,4.4,4.4,4.8,4.2,5.5,4.6,4.2,5],[17,34,12,30,23,28,60,20,12,71,37,25,16,109,67,17,25,33,49,24,19,14,91,30,20,26,17,20,51,23,25,31,11,55,20,15,40,23,13,24,20,10,42,11,49,45,13,13,23,15,19,14,22,10,14,22,13,82,22,35,50,23,44,28,69,47,73,68,37,14,27,41,23,20,19,14,22,11,12,11,15,16,58,51,29,13,19,21,21,48,80,15,29,20,41,16,78,18,17,32]],"container":"<table class=\"table table-condensed\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>lat<\/th>\n      <th>long<\/th>\n      <th>depth<\/th>\n      <th>mag<\/th>\n      <th>stations<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"scrollY":300,"scroller":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<pre class="markdown" data-shortcodes="false"><code>---
title: "Shiny Exercises"
author: "Ben Best"
date: today
date-format: "YYYY-MM-DD"
format:
  html:
    toc: true
    toc-depth: 3
    code-fold: true
    code-tools: true
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
# original: https://github.com/bbest/shiny-intro

knitr::opts_chunk$set(echo = TRUE, message = F)
```

## Background

Here's a presentation to accompany these introductory materials:

  [Creating Interactive Web Applications with R &amp; Shiny](http://bit.ly/shiny-2018-04)

Numbered folders in this repository correspond with iterative development and enhancement of a Shiny app:

- `01_faithful`: default app from using RStudio, File &gt; New File &gt; Shiny Web App…
  ![](screenshot-01_faithful.png)
- `02_quakes_mag`: swap to quakes dataset, adjust histogram by magnitude
- `03_quakes_depth`: add depth slider, select box for variable to histogram
- `04_quakes_map`: add leaflet map
- `05_quakes_dashboard`: enhance ui with shinydashboard
  ![](screenshot-05_quakes_dashboard.png)

The latest versions of [R](https://cloud.r-project.org/) and [RStudio](https://www.rstudio.com/products/rstudio/download/#download) are highly recommended to follow along.

The following sections in this Rmarkdown document demonstrate how you can develop output visualizations for use in a Shiny app, especially by defining input variables as a list (`input$*`). Knitting this Rmarkdown document `docs/index.Rmd` to `docs/index.html` in this repo and pushing to Github then allows the HTML to be viewable at https://bbest.github.io/shiny-intro (using the [Github Pages](https://pages.github.com) feature). In contrast, note that Github and most web hosting services can __*not*__ host a Shiny app. Although the [leaflet](http://rstudio.github.io/leaflet) and [plotly](https://plot.ly/ggplot2) visualizations in this document are interactive in the web browser, they do not require the Shiny library or a Shiny server to be displayed. Rather, the HTML output can be easily hosted on the most basic web server or passed as an email attachment. The Shiny context allows for ultimate flexibility with user interactions, but may be overkill for basic visualization. Check out all the amazing [htmlwidgets.org](http://www.htmlwidgets.org/) and framework that works in the three contexts of: 1) RStudio, 2) Rmarkdown, and 3) Shiny.

## Download

To run locally, first download the repository of files here:

- https://github.com/bbest/shiny-intro/archive/master.zip

(Or use `git clone https://github.com/bbest/shiny-intro.git`.) Then unzip and launch RStudio into that working directory by double-clicking on the `shiny-intro.Rproj` file.

## `01_faithful`

- Code: [01_faithful](https://github.com/bbest/shiny-intro/tree/master/01_faithful)

- Run from GitHub:
  ```r
  shiny::runGitHub("bbest/shiny-intro", subdir="01_faithful")
  ```

- Run locally:
  ```r
  shiny::runApp("01_faithful")
  ```
  
In order to quickly experiment with visualization, we could pull the code from within the rendering function of the Shiny app and set the input list values that would otherwise be set from the user interface...

quarto-executable-code-5450563D

```r
input = list(bins = 30)

x &lt;- faithful[, 2] 
bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)
    
hist(x, breaks = bins, col = 'darkgray', border = 'white')
```

## `02_quakes_mag`

quarto-executable-code-5450563D

```r
library(tidyverse)

input &lt;- list(slider_mag = c(4, 6))

d &lt;- quakes %&gt;%
  filter(
    mag &gt;= input$slider_mag[1],
    mag &lt;= input$slider_mag[2])

hist(d$mag, col = 'darkgray', border = 'white')
```


- Code: [02_quakes_mag](https://github.com/bbest/shiny-intro/tree/master/02_quakes_mag)

- Run from GitHub:
  ```r
  shiny::runGitHub("bbest/shiny-intro", subdir="02_quakes_mag")
  ```

- Run locally:
  ```r
  shiny::runApp("02_quakes_mag")
  ```

## `03_quakes_depth`

quarto-executable-code-5450563D

```r
library(tidyverse)

input &lt;- list(
  select_var = "depth", 
  slider_mag = c(4, 5), 
  slider_depth = c(0, 100))

d &lt;- quakes %&gt;%
  filter(
    mag   &gt;= input$slider_mag[1],
    mag   &lt;= input$slider_mag[2],
    depth &gt;= input$slider_depth[1],
    depth &lt;= input$slider_depth[2])

hist(d[,input$select_var], col = 'darkgray', border = 'white')
```

- Code: [03_quakes_depth](https://github.com/bbest/shiny-intro/tree/master/03_quakes_depth)

- Run from GitHub:
  ```r
  shiny::runGitHub("bbest/shiny-intro", subdir="03_quakes_depth")
  ```

- Run locally:
  ```r
  shiny::runApp("03_quakes_depth")
  ```

* [shiny-intro/04_quakes_map at master · bbest/shiny-intro](https://github.com/bbest/shiny-intro/tree/master/04_quakes_map)
* [shiny-intro/05_quakes_dashboard at master · bbest/shiny-intro](https://github.com/bbest/shiny-intro/tree/master/05_quakes_dashboard)
* [Fiji earthquakes](http://benbestphd.com/shiny-intro/crosstalk.html)

## `04_quakes_map`

- [Leaflet for R - Markers](http://rstudio.github.io/leaflet/markers.html#icon-markers)

quarto-executable-code-5450563D

```r
library(leaflet)
library(glue)

leaflet(data = quakes[1:20,]) %&gt;% 
  addTiles() %&gt;%
  addCircleMarkers(
    radius = ~mag, color = "red", stroke = FALSE, fillOpacity = 0.5,
    popup = ~glue("&lt;b&gt;mag&lt;/b&gt;: {mag}&lt;br&gt;depth: {depth} m"), label = ~as.character(mag))
```

- Code: [04_quakes_map](https://github.com/bbest/shiny-intro/tree/master/04_quakes_map)

- Run from GitHub:
  ```r
  shiny::runGitHub("bbest/shiny-intro", subdir="04_quakes_map")
  ```

- Run locally:
  ```r
  shiny::runApp("04_quakes_map")
  ```
  
## `05_quakes_dashboard`

Use:
- http://rstudio.github.io/shinydashboard
- https://github.com/tidyverse/ggplot2
- https://plot.ly/ggplot2

quarto-executable-code-5450563D

```r
library(tidyverse)
library(glue)

input &lt;- list(
  select_var   = "depth", 
  slider_mag   = c(4, 5), 
  slider_depth = c(0, 100))

get_df &lt;- function(){
  df &lt;- quakes %&gt;%
    filter(
      mag   &gt;= input$slider_mag[1],
      mag   &lt;= input$slider_mag[2],
      depth &gt;= input$slider_depth[1],
      depth &lt;= input$slider_depth[2])
  df$var &lt;- df[[input$select_var]]
  df
}

df        &lt;- get_df()
bin_width &lt;- min(c(7, length(unique(df$var))))
    
g &lt;- ggplot(df, aes(var)) + 
  geom_histogram(binwidth=bin_width)

plotly::ggplotly(g)
```


- Code: [05_quakes_dashboard](https://github.com/bbest/shiny-intro/tree/master/05_quakes_dashboard)

- Run from GitHub:
  ```r
  shiny::runGitHub("bbest/shiny-intro", subdir="05_quakes_dashboard")
  ```

- Run locally:
  ```r
  shiny::runApp("05_quakes_dashboard")
  ```
  
- View app directly: https://bdbest.shinyapps.io/05_quakes_dashboard

  [![](./screenshot-05_quakes_dashboard.png)](https://bdbest.shinyapps.io/05_quakes_dashboard)
  
## Rmarkdown using Crosstalk

- https://rstudio.github.io/crosstalk

quarto-executable-code-5450563D

```r
library(crosstalk)
library(leaflet)
library(DT)

# Wrap data frame in SharedData
sd &lt;- SharedData$new(quakes[sample(nrow(quakes), 100),])

# Create a filter input
filter_slider("mag", "Magnitude", sd, column=~mag, step=0.1, width=250)

# Use SharedData like a dataframe with Crosstalk-enabled widgets
bscols(
  leaflet(sd) %&gt;% 
    addTiles() %&gt;% 
    addMarkers(),
  datatable(
    sd, extensions="Scroller", style="bootstrap", class="compact", width="100%",
    options=list(deferRender=TRUE, scrollY=300, scroller=TRUE)))
```
</code></pre>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>